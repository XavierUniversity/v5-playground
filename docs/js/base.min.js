function trapEscapeKey(a,b){if(27==b.which){a.find("*").filter(".drawer-close").click(),b.preventDefault()}}function trapTabKey(a,b){if(9==b.which){var c,d=a.find("*");c=d.filter(focusableElementsString).filter(":visible");var e;e=jQuery(":focus");var f;f=c.length;var g;g=c.index(e),b.shiftKey?0===g&&(c.get(f-1).focus(),b.preventDefault()):g==f-1&&(c.get(0).focus(),b.preventDefault())}}function setFocusToFirstItem(a){var b=a.find("*");setTimeout(function(){b.filter(focusableElementsString).filter(":visible").first().focus()},250)}function openDrawer(a){"main-nav"==a.attr("id")&&jQuery("body").addClass("nav-open"),jQuery(a).addClass("visible"),jQuery(a).attr("aria-hidden",!1),jQuery("#content").attr("aria-hidden",!0),jQuery("body").on("focusin","#content",function(){setFocusToFirstItem(jQuery(a))}),focusedElementBeforeModal=jQuery(":focus"),setFocusToFirstItem(a)}function closeDrawer(){jQuery("body").removeClass("nav-open"),jQuery(".drawer").removeClass("visible"),jQuery(".drawer").attr("aria-hidden",!0),jQuery("#content").attr("aria-hidden",!1),jQuery("body").off("focusin","#content"),focusedElementBeforeModal.focus()}function delay(a,b){var c=0;return function(){var d=this,e=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(d,e)},b||0)}}function search(a){var b="";$.ajax({url:"https://search.xavier.edu/s/search.json",method:"GET",data:{collection:"xavu-meta",query:a,show:15}}).done(function(a,c){$.each(a.response.resultPacket.results,function(a,c){var d=c.summary,e=c.title.replace(" | Xavier University","");console.log(e),void 0!==c.metaData.stencilsCourseDesc&&(d=c.metaData.stencilsCourseDesc),b+='<a href="https://search.xavier.eduLINK" class="search__result">',b+='<h2 class="search__title">'+e+"</h2>",b+='<p class="search__content">',b+='<span class="search__url">'+c.liveUrl+"</span>",b+='<span class="search__description">'+d+"</span>",b+='<span class="search__tag">'+c.collection+"</span>",b+="</p></a>"}),b.length>1?($(".search__results").html('<h1 class="sr-only">Search Results</h1>'+b),$(".search__sidebar").show(),$(".search__intro").hide()):($(".search__results").html('<h1 class="sr-only">Search Results</h1><p class="search__content">No results found</p>'),$(".search__sidebar").hide())})}function getDistance(){return h.offsetTop}function toggleState(a,b){var a=document.querySelectorAll(a);a&&a.forEach(function(a){a.classList.toggle(b)})}function toggleStateEvent(a){toggleState(a.target.getAttribute("data-toggle"),"visible"),document.querySelectorAll('[data-toggle="'+a.target.getAttribute("data-toggle")+'"]').forEach(function(a){a.classList.toggle("on")})}var focusableElementsString="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",focusedElementBeforeModal,id;jQuery(".drawer-open").click(function(a){a.preventDefault(),id=$(this).data("controls"),openDrawer($("#"+id))}),jQuery(".drawer-close").click(function(a){closeDrawer()}),jQuery(".drawer").keydown(function(a){trapEscapeKey($(this),a)}),jQuery(".drawer").keydown(function(a){trapTabKey($(this),a)}),jQuery("#overlay").click(function(a){closeDrawer()}),$("#query").on("keyup",delay(function(a){a.preventDefault(),search($(this).val())},250)),$("#header-search").on("submit",function(a){a.preventDefault(),search($("#query").val())});var h=document.getElementById("header"),stuck=!1,stickPoint=getDistance();window.onscroll=function(a){var b=getDistance()-window.pageYOffset,c=window.pageYOffset;b<0&&!stuck?(h.classList.add("header--fixed"),stuck=!0):stuck&&c<=stickPoint&&(h.classList.remove("header--fixed"),stuck=!1)},document.addEventListener("click",toggleStateEvent);