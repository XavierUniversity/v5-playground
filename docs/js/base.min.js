var focusedElementBeforeModal,id,focusableElementsString="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";function trapEscapeKey(e,a){27==a.which&&(e.find("*").filter(".drawer-close").click(),a.preventDefault())}function trapTabKey(e,a){var s,t,r,c;9==a.which&&(s=e.find("*").filter(focusableElementsString).filter(":visible"),t=jQuery(":focus"),r=s.length,c=s.index(t),a.shiftKey?0===c&&(s.get(r-1).focus(),a.preventDefault()):c==r-1&&(s.get(0).focus(),a.preventDefault()))}function setFocusToFirstItem(e){var a=e.find("*");setTimeout(function(){a.filter(focusableElementsString).filter(":visible").first().focus()},250)}function openDrawer(e){"main-nav"==e.attr("id")&&jQuery("body").addClass("nav-open"),jQuery(e).addClass("visible"),jQuery(e).attr("aria-hidden",!1),jQuery("#content").attr("aria-hidden",!0),jQuery("body").on("focusin","#content",function(){setFocusToFirstItem(jQuery(e))}),$(".drawer").bind("mouseenter touchstart",function(e){var a=$(window).scrollTop();$(window).scroll(function(e){$(window).scrollTop(a)})}),focusedElementBeforeModal=jQuery(":focus"),setFocusToFirstItem(e)}function closeDrawer(){jQuery("body").removeClass("nav-open"),jQuery(".drawer").removeClass("visible"),jQuery(".drawer").attr("aria-hidden",!0),jQuery("#content").attr("aria-hidden",!1),jQuery("body").off("focusin","#content"),$(".drawer").bind("mouseleave touchend",function(e){$(window).off("scroll")}),focusedElementBeforeModal.focus()}function delay(s,t){var r=0;return function(){var e=this,a=arguments;clearTimeout(r),r=setTimeout(function(){s.apply(e,a)},t||0)}}function searchArray(e,a,s){for(var t=0;t<s.length;t++)if(s[t][a]===e)return s[t]}function buildTabs(e,a){var s="";1<e.length&&($.each(e,function(e,a){s+='<li class="search__facet-item"><a class="search__facet-link'+(1==a.selected?" is-active":"")+'" href="'+a.toggleUrl+'">'+a.label+'</a><span class="search__facet-count">'+a.count+"</span></li>"}),$("#search-tabs").html(s))}function buildResult(e){var a=e.title.replace(" | Xavier University",""),s='<a href="https://search.xavier.edu'+e.clickTrackingUrl+'" class="search__result">',t="</a>",r='<span class="search__url">'+e.liveUrl+"</span>",c=e.summary,n="$open";n+='<h2 class="search__title">$title</h2>',n+='<p class="search__content">',n+="$liveUrl",n+='<span class="search__description">$description</span>',n+='<span class="search__tag">'+e.collection.replace("xavu-","")+"</span>",void 0!==e.metaData.stencilsCourseLevel&&(n+='<span class="search__tag">'+e.metaData.stencilsCourseLevel+"</span>"),n+="</p>$close";return"xavu-people"==e.collection&&(s='<div class="search__result">',t="</div>",r="",a='<a href="https://search.xavier.edu'+e.clickTrackingUrl+'">'+e.metaData.stencilsPeopleFirstName+"</a>",c='<img class="search__image" src="'+e.metaData.I+'" alt="" /><strong>'+e.metaData.stencilsPeoplePosition+'</strong><br /><a href="mailto:'+e.metaData.stencilsPeopleEmail+'@xavier.edu" class="search__contact">'+e.metaData.stencilsPeopleEmail+'@xavier.edu</a> <span class="search__contact">'+e.metaData.stencilsPeoplePhone+'</span><span class="search__contact">'+e.metaData.stencilsPeopleLocation+"</span>"),"xavu-programs"==e.collection&&(c=e.metaData.stencilsCourseDesc),n=(n=(n=(n=(n=n.replace("$open",s)).replace("$title",a)).replace("$liveUrl",r)).replace("$description",c)).replace("$close",t)}function search(e){var o="";$.ajax({url:"https://search.xavier.edu/s/search.json",method:"GET",data:e}).done(function(e,a){var s=searchArray("Tabs","name",e.response.facets),t=e.response.customData.stencilsPaging,r=e.response.resultPacket.resultsSummary,c=e.response.resultPacket.results;buildTabs(s.allValues),o+='<p class="search__count">Showing results '+r.currStart+"-"+r.currEnd+" out of "+r.totalMatching+" results for: <em>"+e.question.query+"</em></p>",$.each(c,function(e,a){o+=buildResult(a)});var n=null!==t.previousUrl?'<a href="'+t.previousUrl+'" class="search__nav" title="Previous page of search results">Previous</a>':"",l=null!==t.nextUrl?'<a href="'+t.nextUrl+'" class="search__nav" title="Next page of search results">Next</a>':"";1<(o+='<div class="search__nav-container">'+n+l+"</div>").length?($(".search__results").html('<h1 class="sr-only">Search Results</h1>'+o),$(".search__sidebar").addClass("visible"),$(".search__intro").hide()):($(".search__intro").show(),$(".search__results").html('<h1 class="sr-only">Search Results</h1><p class="search__content">No results found</p>'),$(".search__sidebar").removeClass("visible"))})}jQuery(".drawer-open").click(function(e){e.preventDefault(),id=$(this).data("controls"),openDrawer($("#"+id))}),jQuery(".drawer-close").click(function(e){closeDrawer()}),jQuery(".drawer").keydown(function(e){trapEscapeKey($(this),e)}),jQuery(".drawer").keydown(function(e){trapTabKey($(this),e)}),jQuery("#overlay").click(function(e){closeDrawer()}),$("#query").on("keyup",delay(function(e){e.preventDefault(),search($("#header-search").serialize())},250)),$("#header-search").on("submit",function(e){e.preventDefault(),search($(this).serialize())}),$(document).on("click",".search__nav",function(e){e.preventDefault(),search($(this).attr("href").replace("?",""))}),$(document).on("click",".search__facet-link",function(e){e.preventDefault(),search($(this).attr("href").replace("?",""))}),$('[data-controls="#search"]').on("click",function(e){$("#query").val(""),$(".search__results").html(""),$(".search__sidebar").removeClass("visible"),$(".search__intro").show()});var h=document.querySelector("#header"),stuck=!1,stickPoint=getDistance();function getDistance(){return h.offsetTop}window.onscroll=function(e){if(document.querySelector("body").classList.contains("homepage")){var a=getDistance()-window.pageYOffset,s=window.pageYOffset;a<0&&!stuck?(h.classList.add("header--fixed"),stuck=!0):stuck&&s<=stickPoint&&(h.classList.remove("header--fixed"),stuck=!1)}},$("[data-toggle]").on("click",function(e){e.preventDefault(),console.log(e);var a=$(this).data("toggle");$(a).toggleClass("visible"),$("[data-toggle="+a+"]").toggleClass("on")});