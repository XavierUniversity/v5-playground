function trapEscapeKey(a,b){if(27==b.which){a.find("*").filter(".drawer-close").click(),b.preventDefault()}}function trapTabKey(a,b){if(9==b.which){var c,d=a.find("*");c=d.filter(focusableElementsString).filter(":visible");var e;e=jQuery(":focus");var f;f=c.length;var g;g=c.index(e),b.shiftKey?0===g&&(c.get(f-1).focus(),b.preventDefault()):g==f-1&&(c.get(0).focus(),b.preventDefault())}}function setFocusToFirstItem(a){var b=a.find("*");setTimeout(function(){b.filter(focusableElementsString).filter(":visible").first().focus()},250)}function openDrawer(a){"main-nav"==a.attr("id")&&jQuery("body").addClass("nav-open"),jQuery(a).addClass("visible"),jQuery(a).attr("aria-hidden",!1),jQuery("#content").attr("aria-hidden",!0),jQuery("body").on("focusin","#content",function(){setFocusToFirstItem(jQuery(a))}),$(".drawer").bind("mouseenter touchstart",function(a){var b=$(window).scrollTop();$(window).scroll(function(a){$(window).scrollTop(b)})}),focusedElementBeforeModal=jQuery(":focus"),setFocusToFirstItem(a)}function closeDrawer(){jQuery("body").removeClass("nav-open"),jQuery(".drawer").removeClass("visible"),jQuery(".drawer").attr("aria-hidden",!0),jQuery("#content").attr("aria-hidden",!1),jQuery("body").off("focusin","#content"),$(".drawer").bind("mouseleave touchend",function(a){$(window).off("scroll")}),focusedElementBeforeModal.focus()}function delay(a,b){var c=0;return function(){var d=this,e=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(d,e)},b||0)}}function searchArray(a,b,c){for(var d=0;d<c.length;d++)if(c[d][b]===a)return c[d]}function buildTabs(a,b){var c="";a.length>1&&($.each(a,function(a,b){c+='<li class="search__facet-item"><a class="search__facet-link'+(1==b.selected?" is-active":"")+'" href="'+b.toggleUrl+'">'+b.label+'</a><span class="search__facet-count">'+b.count+"</span></li>"}),$("#search-tabs").html(c))}function buildResult(a){var b=a.title.replace(" | Xavier University",""),c='<a href="https://search.xavier.edu'+a.clickTrackingUrl+'" class="search__result">',d="</a>",e='<span class="search__url">'+a.liveUrl+"</span>",f=a.summary,g="$open";g+='<h2 class="search__title">$title</h2>',g+='<p class="search__content">',g+="$liveUrl",g+='<span class="search__description">$description</span>',g+='<span class="search__tag">'+a.collection.replace("xavu-","")+"</span>",void 0!==a.metaData.stencilsCourseLevel&&(g+='<span class="search__tag">'+a.metaData.stencilsCourseLevel+"</span>"),g+="</p>$close";return"xavu-people"==a.collection&&(c='<div class="search__result">',d="</div>",e="",b='<a href="https://search.xavier.edu'+a.clickTrackingUrl+'">'+a.metaData.stencilsPeopleFirstName+"</a>",f='<img class="search__image" src="'+a.metaData.I+'" alt="" /><strong>'+a.metaData.stencilsPeoplePosition+'</strong><br /><a href="mailto:'+a.metaData.stencilsPeopleEmail+'@xavier.edu" class="search__contact">'+a.metaData.stencilsPeopleEmail+'@xavier.edu</a> <span class="search__contact">'+a.metaData.stencilsPeoplePhone+'</span><span class="search__contact">'+a.metaData.stencilsPeopleLocation+"</span>"),"xavu-programs"==a.collection&&(f=a.metaData.stencilsCourseDesc),g=g.replace("$open",c),g=g.replace("$title",b),g=g.replace("$liveUrl",e),g=g.replace("$description",f),g=g.replace("$close",d)}function search(a){var b="";$.ajax({url:"https://search.xavier.edu/s/search.json",method:"GET",data:a}).done(function(a,c){var d=searchArray("Tabs","name",a.response.facets),e=a.response.customData.stencilsPaging,f=a.response.resultPacket.resultsSummary,g=a.response.resultPacket.results;buildTabs(d.allValues),b+='<p class="search__count">Showing results '+f.currStart+"-"+f.currEnd+" out of "+f.totalMatching+" results for: <em>"+a.question.query+"</em></p>",$.each(g,function(a,c){b+=buildResult(c)});var h=null!==e.previousUrl?'<a href="'+e.previousUrl+'" class="search__nav" title="Previous page of search results">Previous</a>':"",i=null!==e.nextUrl?'<a href="'+e.nextUrl+'" class="search__nav" title="Next page of search results">Next</a>':"";b+='<div class="search__nav-container">'+h+i+"</div>",b.length>1?($(".search__results").html('<h1 class="sr-only">Search Results</h1>'+b),$(".search__sidebar").addClass("visible"),$(".search__intro").hide()):($(".search__intro").show(),$(".search__results").html('<h1 class="sr-only">Search Results</h1><p class="search__content">No results found</p>'),$(".search__sidebar").removeClass("visible"))})}function getDistance(){return h.offsetTop}var focusableElementsString="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",focusedElementBeforeModal,id;jQuery(".drawer-open").click(function(a){a.preventDefault(),id=$(this).data("controls"),openDrawer($("#"+id))}),jQuery(".drawer-close").click(function(a){closeDrawer()}),jQuery(".drawer").keydown(function(a){trapEscapeKey($(this),a)}),jQuery(".drawer").keydown(function(a){trapTabKey($(this),a)}),jQuery("#overlay").click(function(a){closeDrawer()}),$("#query").on("keyup",delay(function(a){a.preventDefault(),search($("#header-search").serialize())},250)),$("#header-search").on("submit",function(a){a.preventDefault(),search($(this).serialize())}),$(document).on("click",".search__nav",function(a){a.preventDefault(),search($(this).attr("href").replace("?",""))}),$(document).on("click",".search__facet-link",function(a){a.preventDefault(),search($(this).attr("href").replace("?",""))}),$('[data-controls="#search"]').on("click",function(a){$("#query").val(""),$(".search__results").html(""),$(".search__sidebar").removeClass("visible"),$(".search__intro").show()});var h=document.getElementById("header"),stuck=!1,stickPoint=getDistance();window.onscroll=function(a){var b=getDistance()-window.pageYOffset,c=window.pageYOffset;b<0&&!stuck?(h.classList.add("header--fixed"),stuck=!0):stuck&&c<=stickPoint&&(h.classList.remove("header--fixed"),stuck=!1)},$("[data-toggle]").on("click",function(a){a.preventDefault(),console.log(a);var b=$(this).data("toggle");$(b).toggleClass("visible"),$("[data-toggle="+b+"]").toggleClass("on")});