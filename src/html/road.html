<!doctype html>
<html class="no-js" lang="">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Road to Xavier | Xavier University</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/main.css">
    <style>
      .hero{
        background-image: repeating-linear-gradient( 45deg, rgba(0, 0, 0, 0.20), transparent 2px, rgba(0, 0, 0, 0.20) 4px, transparent 4px ), url("images/hero/Art_Hero@1x.jpg");
        background-image: repeating-linear-gradient( 45deg, rgba(0, 0, 0, 0.20), transparent 2px, rgba(0, 0, 0, 0.20) 4px, transparent 4px ), -webkit-image-set( url("images/hero/Art_Hero@1x.jpg") 1x, url("images/hero/Art_Hero@2x.jpg") 2x );
        background-image: repeating-linear-gradient( 45deg, rgba(0, 0, 0, 0.20), transparent 2px, rgba(0, 0, 0, 0.20) 4px, transparent 4px ), image-set( url("images/hero/Art_Hero@1x.jpg") 1x, url("images/hero/Art_Hero@2x.jpg") 2x );
      }
    </style>
  </head>
  <body>
    include "includes/header.accessibility.html"
    <header>
      <div class="header header--fixed" id="header">  
        include "includes/header.html"
      </div>
    </header>
    <!-- Add your site or application content here -->
    <main id="content">
      <section class="hero hero--large">
        <h1 class="hero__title hero--large__title">Art</h1>
      </section>

      <div class="wrapper designed-wrapper">
        
        <div class="content">
          include "includes/breadcrumbs.html"
          <div class="video__container logged-in" id="0">
            <div class="plyr" data-plyr-provider="youtube" data-plyr-embed-id="RMPQOyvgjPs" data-poster="https://source.unsplash.com/random/1280x720"></div>
          </div>
                    
          <div class="panel logged-in" id="2">
            <button class="o-btn tt__btn" data-uid="2">
              <span>&hellip;</span>
            </button>
            <div class="mo mo--road">
              <div class="mo__content mo__content--full">
                <h3>Testing</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
              </div>
            </div>
          
            <div class="mo mo--road">
              <div class="mo__img">
                <img src="http://lorempixel.com/230/180/city/2" />
              </div>
              <div class="mo__content">
                <h3>Testing</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
              </div>
            </div>
          </div>
          
          <div class="video__container" id="40">
            <button class="o-btn tt__btn" data-uid="40">
              <span>&hellip;</span>
            </button>
            <div class="plyr" data-plyr-provider="vimeo" data-plyr-embed-id="122375452"></div>
          </div>
          
          <div class="mo mo--road logged-in" id="123">
            <div class="mo__img">
              <img src="http://lorempixel.com/230/180/city/1" />
            </div>
            <div class="mo__content">
              <button class="o-btn tt__btn" data-uid="123">
                <span>&hellip;</span>
              </button>
              <h3>Testing</h3>
              <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            </div>
          </div>
          
          <div class="mo mo--road" id="900">
            <div class="mo__img">
              <img src="http://lorempixel.com/230/180/city/1" />
            </div>
            <div class="mo__content">
              <button class="o-btn tt__btn" data-uid="900">
                <span>&hellip;</span>
              </button>
              <h3>Testing</h3>
              <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            </div>
          </div>
          
          <div class="mo mo--road" id="19">
            <div class="mo__img">
              <img src="http://lorempixel.com/230/180/city/1" />
            </div>
            <div class="mo__content">
              <button class="o-btn tt__btn" data-uid="19">
                <span>&hellip;</span>
              </button>
              <h3>Testing</h3>
              <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            </div>
          </div>
          <div class="tour" style="background-image: url('images/tour/background.svg');" id="41">
            <button class="o-btn tt__btn" data-uid="41">
              <span>&hellip;</span>
            </button>
            <div class="tour__content">
              <h3 class="tour__title">Virtual Campus Tour</h3>
              <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
              <a href="https://www.youvisit.com/#/vte/?data-platform=v&data-inst=120178&data-image-width=100%&data-image-height=100%&data-loc=142516" class="tour__btn">
                Tour Campus
              </a>
            </div>
            <img src="images/tour/phone.svg" alt="" class="tour__img" />
          </div>
        </div><!-- /content -->
        <div class="sidebar">
          <div class="panel panel--academic">
            <h2 class="panel__title panel__title--form text--centered">Account Login</h2>
            <form class="form">
              <fieldset class="form__fieldset">
                <legend class="form__title sr-only">Account Login</legend>
                <label class="form__label">Username</label>
                <input type="text" class="form__input form__input--full" />
                <label class="form__label">Password</label>
                <input type="password" class="form__input form__input--full" />
                <div class="action">
                  <button class="o-btn c-btn">Sign In</button>
                </div>
              </fieldset>
            </form>          
            <div class="text--centered">
              <p><a href="#">Create account</a> | <a href="#">Forgot password</a></p>
              <p><a href="#">Parent Access</a></p>
            </div>
          </div><!-- /panel -->
          
          <div class="panel panel--academic tasks">
            <h2 class="panel__title panel__title--form text--centered">To Do List</h2>
            <template>
              <p v-if="!tasks.length">Good job! Nothing to do.</p>
              <button v-for="task in tasks" class="o-btn btn" v-on:click.prevent="modal(task.ID)" :aria-controls="task.ID" aria-expanded="false">{{ task.title }}</button>
              <div v-for="task in tasks" class="modal" :id="task.ID" role="dialog">
                <button aria-label="close task window" class="o-btn modal__close" data-controls="#task" id="cancel" style="float: right;" v-on:click="hideModal(task.ID);" aria-hidden="true">
                  <svg class="icon drawer__icon">
                    <use xlink:href="#xu-close" />
                  </svg>
                </button>
                <div class="modal__content">
                  <h2 class="modal__title">{{ task.title }}</h2>
                  <div v-html="task.activeCopy"></div>
                  <p><a :href="task.linkURL" class="link-arrow">{{ task.linkCopy }}</a></p>
                </div>
              </div>
           </template>
          </div>

        </div><!-- /sidebar -->
      </div><!-- /academic-wrapper -->
      
      <div class="spacer spacer--72"></div>
            
      <div id="template">
        <ul class="list--bare">
          <li><a href="#" class="pin">pin item</a></li>
          <li><a href="#" class="dismiss">dismiss</a></li>
        </ul>
      </div>
    </main>
    <!-- End site or application content -->
    include "includes/footer.html"
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <script src="https://unpkg.com/tippy.js@6"></script>
    <script src="https://cdn.plyr.io/3.6.2/plyr.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
      // Vue component for Task List
      new Vue({ el: '.tasks',
        data: {
          tasks: [
            {
              ID: 1,
              title: "EARN A $500 GRANT BY SUBMITTING YOUR FAFSA EARLY",
              activeCopy: "<p>Apply to Xavier and file the FAFSA before December 1 to be eligible for a $500 Early Filers Grant. View more about eligibility details at xavier.edu/grant-details.</p><p>If you want to be considered for need-based financial assistance, complete the Free Application for Federal Student Aid (FAFSA) online or request a paper copy of the FAFSA from 800-4FED-AID.The Free Application for Federal Student Aid opened on October 1. When applying, be sure to list Xavierâ€™s federal school code: 003144. If you have filed your tax return, select the IRS Data Retrieval option to automatically transfer tax information and save time.</p>",
              linkCopy: "Click Here",
              linkURL: "https://google.com",
            },
            {
              ID: 2,
              title: "EARN A $500 GRANT BY SUBMITTING YOUR FAFSA EARLY",
              activeCopy: "<p>Apply to Xavier and file the FAFSA before December 1 to be eligible for a $500 Early Filers Grant. View more about eligibility details at xavier.edu/grant-details.</p><p>If you want to be considered for need-based financial assistance, complete the Free Application for Federal Student Aid (FAFSA) online or request a paper copy of the FAFSA from 800-4FED-AID.The Free Application for Federal Student Aid opened on October 1. When applying, be sure to list Xavierâ€™s federal school code: 003144. If you have filed your tax return, select the IRS Data Retrieval option to automatically transfer tax information and save time.</p>",
              linkCopy: "Click Here",
              linkURL: "https://google.com",
            },
            {
              ID: 3,
              title: "EARN A $500 GRANT BY SUBMITTING YOUR FAFSA EARLY",
              activeCopy: "<p>Apply to Xavier and file the FAFSA before December 1 to be eligible for a $500 Early Filers Grant. View more about eligibility details at xavier.edu/grant-details.</p><p>If you want to be considered for need-based financial assistance, complete the Free Application for Federal Student Aid (FAFSA) online or request a paper copy of the FAFSA from 800-4FED-AID.The Free Application for Federal Student Aid opened on October 1. When applying, be sure to list Xavierâ€™s federal school code: 003144. If you have filed your tax return, select the IRS Data Retrieval option to automatically transfer tax information and save time.</p>",
              linkCopy: "Click Here",
              linkURL: "https://google.com",
            },
            {
              ID: 4,
              title: "EARN A $500 GRANT BY SUBMITTING YOUR FAFSA EARLY",
              activeCopy: "<p>Apply to Xavier and file the FAFSA before December 1 to be eligible for a $500 Early Filers Grant. View more about eligibility details at xavier.edu/grant-details.</p><p>If you want to be considered for need-based financial assistance, complete the Free Application for Federal Student Aid (FAFSA) online or request a paper copy of the FAFSA from 800-4FED-AID.The Free Application for Federal Student Aid opened on October 1. When applying, be sure to list Xavierâ€™s federal school code: 003144. If you have filed your tax return, select the IRS Data Retrieval option to automatically transfer tax information and save time.</p>",
              linkCopy: "Click Here",
              linkURL: "https://google.com",
            }
          ],
          task: '',
        },
        mounted: function(){
          // For Dev...CORS is blocking this
          this.getTasks();
        },
        methods: { 
          getTasks: function(){
            axios.get('https://www.xavier.edu/api/1.0/tasks/list', {
              params:{
                status: 'active',
                limit: 5,
              }
            }).then( response => {
              this.tasks = response.data;
            }).catch( error => console.log(error));
          },
          hideModal: function(taskId){
            hideModal($("#"+taskId+".modal"));
          },
          modal: function(taskId){
            console.log(taskId);
            showModal($("#"+taskId+".modal"));
          }
        }
      });

      // Tippy updates. Should be fun...
      const template = document.getElementById('template');
      var itemId = null;
      var cardIds = localStorage.getItem('cards') === null ? [] : localStorage.getItem('cards');
      template.style.display = 'none';  
      
      if ( cardIds !== null && cardIds.length > 0){
        var cards = cardIds.split(',');
        for ( var i = 0; i < cards.length; i++){
          let cardId = cards[i];
          if ( document.getElementById(cardId) !== null ){
            document.getElementById(cardId).style.display = 'none';
          }
        }
      }
      
      function hideCard(cardId){
        let card = document.getElementById(cardId);
        card.style.display = 'none'; // Hide the card itself, mainly for local users
        if ( card.classList.contains('logged-in') ){
          axios.get('https://www.xavier.edu/api/1.0/cards/update-status', {
            params:{
              status: 'active',
              complete: true,
            }
          }).then( response => {
            this.tasks = response.data;
          }).catch( error => console.log(error));
        }
        cardIds.push(cardId);
        localStorage.setItem("cards", cardIds);
      }
      
      tippy('.tt__btn', {
        theme: 'light-border',
        trigger: 'click',
        content: template.innerHTML,
        allowHTML: true,
        interactive: true,
        hideOnClick: 'toggle',
        interactiveDebounce: 75,
        onShown(instance){ // Sets the Item Id as soon as the tooltip starts to show
          // Sets the Item ID, so we can reference it later.
          itemId = instance.reference.getAttribute('data-uid');
          $('.dismiss').on('click', function(e){
            e.preventDefault();
            hideCard(itemId);
            instance.hide();
          });
        },
        onHide(instance){ // Clears out the Item Id when the tooltip is closing
          itemId = null;
        }
      });
      // 
      const controls = `
        <div class="plyr__controls">
          <button type="button" class="plyr__control plyr__controls__item" aria-label="Play, {title}" data-plyr="play">
              <svg class="icon--pressed" role="presentation"><use xlink:href="#plyr-pause"></use></svg>
              <svg class="icon--not-pressed" role="presentation"><use xlink:href="#plyr-play"></use></svg>
              <span class="label--pressed plyr__tooltip" role="tooltip">Pause</span>
              <span class="label--not-pressed plyr__tooltip" role="tooltip">Play</span>
          </button>
          <div class="plyr__progress__container plyr__controls__item">
            <div class="plyr__progress">
                <input data-plyr="seek" type="range" min="0" max="100" step="0.01" value="0" aria-label="Seek">
                <progress class="plyr__progress__buffer" min="0" max="100" value="0">% buffered</progress>
                <span role="tooltip" class="plyr__tooltip">00:00</span>
            </div>
          </div>
          <div class="plyr__time plyr__time--current plyr__controls__item" aria-label="Duration">00:00</div>
          
          <button type="button" class="plyr__control plyr__controls__item" aria-label="Mute" data-plyr="mute">
              <svg class="icon--pressed" role="presentation"><use xlink:href="#plyr-muted"></use></svg>
              <svg class="icon--not-pressed" role="presentation"><use xlink:href="#plyr-volume"></use></svg>
              <span class="label--pressed plyr__tooltip" role="tooltip">Unmute</span>
              <span class="label--not-pressed plyr__tooltip" role="tooltip">Mute</span>
          </button>
          
          <div class="plyr__volume plyr__controls__item">
              <input data-plyr="volume" type="range" min="0" max="1" step="0.05" value="1" autocomplete="off" aria-label="Volume">
          </div>
          <button type="button" class="plyr__control" data-plyr="captions">
              <svg class="icon--pressed" role="presentation"><use xlink:href="#plyr-captions-on"></use></svg>
              <svg class="icon--not-pressed" role="presentation"><use xlink:href="#plyr-captions-off"></use></svg>
              <span class="label--pressed plyr__tooltip" role="tooltip">Disable captions</span>
              <span class="label--not-pressed plyr__tooltip" role="tooltip">Enable captions</span>
          </button>
          <button type="button" class="plyr__control plyr__controls__item" data-plyr="fullscreen">
              <svg class="icon--pressed" role="presentation"><use xlink:href="#plyr-exit-fullscreen"></use></svg>
              <svg class="icon--not-pressed" role="presentation"><use xlink:href="#plyr-enter-fullscreen"></use></svg>
              <span class="label--pressed plyr__tooltip" role="tooltip">Exit fullscreen</span>
              <span class="label--not-pressed plyr__tooltip" role="tooltip">Enter fullscreen</span>
          </button>
          <button type="button" class="plyr__control plyr__controls__item" data-plyr="hide">
              <svg class="icon--not-pressed" role="presentation"><use xlink:href="#xu-close"></use></svg>
              <span class="label--not-pressed plyr__tooltip" role="tooltip">Dismiss Video</span>
          </button>
      </div>`;
      
      const players = Array.from(document.querySelectorAll('.plyr')).map(p => new Plyr(p, {
        controls: controls,
      }));
      
      window.addEventListener("load", function(){
        document.querySelector("[data-plyr='hide']").addEventListener("click", function(e){
          var vid = this.parentNode.parentNode.parentNode.id;
          document.getElementById(vid).style.display = 'none';
          hideCard(vid);
        });
      });
      
    </script>
  </body>
</html>